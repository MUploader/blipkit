#!/usr/local/bin/swipl -L0 -G0 -A0 -T0 -q -g main -t halt -s

/*

*/

:- use_module(bio(ontol)).
:- use_module(bio(bioprolog_util)).
:- use_module(bio(io)).

usage('bpr-ontol-inst-to-xml inst.pro > inst.xml').

main:-
        getopt([
                atom(trace,Trace,true),
                atom([format,from,f],Format),
                atoms([i,input],InputFileL),
                atom([to,t],ToFormat),
                atom([o,output],OutFile),
                atoms([u,use],UseModL),
                atoms([r,resource],ResourceL),
                atoms([c,conf],ConfL)],
               FileL),
        Trace,
        forall(member(Conf,ConfL),
               (   expand_file_search_path(Conf,ConfPath),
                   consult(ConfPath))),
        findall(Resource,(member(Resource,ResourceL),
                          load_bioresource(Resource)),_),
        findall(File,(member(File,InputFileL),
                      load_biofile(Format,File)),_),
        findall(Mod,(member(Mod,UseModL),
                     ensure_loaded(bio(Mod))),_),
        write_biofile(ToFormat,OutFile),
        load_factfiles(FileL),
        halt.

