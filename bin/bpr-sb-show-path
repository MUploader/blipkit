#!/usr/local/bin/swipl -L0 -G0 -T0 -A0 -q -g main -t halt -s

:- use_module(bio(sb)).
:- use_module(bio(io)).
:- use_module(bio(bioprolog_util)).

main:-
        getopt([atom(id,ID),
                atom([format,from,f],Format),
                atoms([i,input],InputFileL),
                atom([to],ToID),                
                atom([name,n],N),
                atoms([res,r],ResourceL)],
               FileL),
        findall(Resource,(member(Resource,ResourceL),
                          load_bioresource(Resource)),_),
        findall(File,(member(File,InputFileL),
                      load_biofile(Format,File)),_),
        load_factfiles(FileL),
        (species(ID,N,Comp) -> true ; die(no_such_species(ID,N))),
        (species(ToID,ToN,ToComp) -> true ; die(no_such_species(ToID,ToN))),
        writeln(species(ID,N,Comp)),
        writeln(species(ToID,ToN,ToComp)),
        forall(sb:species_path(ID,ToID,RL),
               writeln(path(RL))),
        halt.

