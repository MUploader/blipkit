#!/usr/local/bin/swipl -q -g main -t halt -s

/*

  input: prolog factfile containing instance (genus/2,differentium/3)

  writes classdef/2 facts
  
*/

:- use_module(bio(ontol)).
:- use_module(bio(bioprolog_util)).

usage('bpr-ontol-write_classdefs dl_go.pro > dl_go_c.pro').
      

main:-
        getopt([atom([r,resource],Res)],FileL),
        (var(Res) -> true ; load_resource(Res)),
        load_factfiles(FileL),
        write_preds,
        halt.

write_preds:-
        setof(ID,(   genus(ID,GenusID),
                     

rewrite_pred(inst(ID,ClassID),[inst(ID,GenusID)|PL]):-
        genus(ClassID,GenusID),
        setof(inst_sv(ID,Type,ToID),differentium(ClassID,Type,ToID),PL),
        !.
replace_inst_pred(X,[X]).

write_terms([]).
write_terms([H|L]):-
        write_term(H),
        write_terms(L).
write_term(H):-
        writeq(H),write('.'),nl.
